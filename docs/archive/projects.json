{"projects":[{"id":"d6751e49-85db-40db-bd39-52eadfa28a4f","title":"Abraxas","description":"Next-generation AI Agent Platform (formerly Archon). Monorepo with Next.js frontend, Supabase DB, and Python backend.","github_repo":"https://github.com/WilldelaVega777/Abraxas","created_at":"2025-11-28T22:03:37.006046+00:00","updated_at":"2025-11-28T22:03:37.006051+00:00","docs":[],"features":{},"data":{},"technical_sources":[],"business_sources":[],"pinned":false},{"id":"143c17aa-f82d-4874-bb37-f511da0afa69","title":"ChronoView","description":"ChronoView project for managing timelines and events.","github_repo":null,"created_at":"2025-11-13T23:28:49.738286+00:00","updated_at":"2025-11-27T20:15:45.601125+00:00","docs":[{"id":"d46f8427-ef4d-41ed-81b5-8ab05bf1b6f2","tags":[],"title":"PRD","author":"User","status":"draft","content":{"markdown":"# Project Requirements Document (PRD)\n\n## 1. Project Overview\n\n### 1.1. Context\nChronoView is an advanced timeline visualization platform designed for legal teams, investigators, and researchers. It allows users to visualize complex events in 3D space and time.\n\n### 1.2. Current State\nThe project is a monorepo (Turborepo) containing a Next.js frontend, a shared UI library, and serverless backend functions. It is currently undergoing a stabilization phase to complete the migration to TypeScript, standardize UI components, and finalize the switch from Supabase to Neon/Stack Auth.\n\n### 1.3. Goals\n- **Stabilization**: Eliminate all linting and TypeScript errors.\n- **Standardization**: Adopt ShadCN UI components fully, replacing custom implementations.\n- **Migration**: Complete the transition to Neon (Database) and Stack Auth (Authentication).\n- **Performance**: Ensure 3D visualization remains performant.\n\n## 2. Functional Requirements\n\n### 2.1. Core Features\n- **Timeline Visualization**: \n  - Users must be able to view events on a 3D timeline.\n  - Support for navigating (zoom, pan, scroll) the timeline.\n  - Interactive event nodes (hover, click for details).\n- **Authentication**:\n  - Users must be able to sign up and log in using Email/Password via Stack Auth.\n  - Protected routes must redirect unauthenticated users to login.\n- **User Management**:\n  - Users must have a profile (linked to Stack Auth ID).\n  - Onboarding flow for new users to complete their profile.\n- **Billing**:\n  - Integration with Stripe for subscription management.\n  - 14-day free trial logic.\n- **Visitor Tracking**:\n  - \"Stealth\" tracking of visitor metadata (IP, Referer, User Agent) without cookies.\n  - Superadmin dashboard to view visitor logs.\n\n### 2.2. Technical Requirements\n- **FR1**: All React code must be in `.tsx` files.\n- **FR2**: `npm run lint` must pass with 0 errors.\n- **FR3**: `npm run check-types` must pass with 0 errors.\n- **FR4**: Remove legacy `packages/ui/src/card.tsx` and `code.tsx`.\n- **FR5**: Replace all usages of custom `Card` with ShadCN `Card`.\n- **FR6**: Ensure `tailwind.config.ts` correctly processes all component files.\n\n## 3. Non-Functional Requirements\n\n### 3.1. Performance\n- **3D Rendering**: The timeline must maintain 60fps on standard hardware.\n- **Load Time**: Initial load time under 2 seconds.\n\n### 3.2. Code Quality\n- **Strict Mode**: TypeScript strict mode enabled.\n- **No `any`**: Explicit types for all variables and functions.\n- **Internationalization**: All UI text must be internationalized (English/Spanish).\n- **Privacy**: Visitor tracking must be cookie-less to respect privacy while gathering analytics.\n\n### 3.3. Compatibility\n- **Browser Support**: Modern evergreen browsers (Chrome, Firefox, Safari, Edge).\n- **Responsiveness**: UI must be responsive (though 3D view is desktop-optimized).\n\n## 4. User Interface\n\n### 4.1. Design System\n- **Library**: ShadCN UI (based on Radix UI).\n- **Styling**: Tailwind CSS 4.\n- **Theme**: Dark mode default for immersive visualization.\n\n### 4.2. Key Screens\n- **Login/Signup**: Clean, simple forms handled by Stack Auth components.\n- **Dashboard**: Main entry point, listing available timelines.\n- **Timeline View**: Full-screen 3D visualization with overlay controls.\n- **Onboarding**: Step-by-step profile completion and subscription setup.\n\n## 5. Technical Architecture\n\n### 5.1. Stack\n- **Frontend**: Next.js 16, React 19, Three.js.\n- **Backend**: Netlify Functions (Node.js).\n- **Database**: Neon (Postgres).\n- **Auth**: Stack Auth.\n\n### 5.2. Data Flow\n1. Client requests data via Netlify Functions.\n2. Function verifies Stack Auth token.\n3. Function queries Neon database.\n4. Data returned to client and rendered.\n\n## 6. Roadmap & Epics\n\n### Epic 1: Stabilization & Standardization (Current Priority)\n- **Story 1.1**: Fix Tailwind/ShadCN configuration.\n- **Story 1.2**: Remove obsolete `Code` component.\n- **Story 1.3**: Replace custom `Card` with ShadCN `Card`.\n- **Story 1.4**: Fix ESLint errors.\n- **Story 1.5**: Fix TypeScript errors.\n\n### Epic 2: Migration Completion\n- **Story 2.1**: Verify Neon database schema parity with Supabase.\n- **Story 2.2**: Finalize Stack Auth integration in all backend functions.\n\n## 7. Known Impediments\n- **Build Issues**: `@repo/ui` package build process needs fixing to resolve type errors in dependent apps.\n- **Linting**: ESLint config in `packages/ui` caused issues (partially resolved, needs verification).\n\n## 8. Reference Documentation\n- [Architecture](./ARCHITECTURE.md)\n- [Tech Stack](./docs/architecture/tech-stack.md)\n"},"version":"1.0","updated_at":"2025-11-27T17:46:44.156535","document_type":"spec"},{"id":"14479f74-c88d-4ff0-99f7-0e66d6e3e932","tags":[],"title":"Architecture","author":"User","status":"draft","content":{"markdown":"# ChronoView Architecture Documentation\n\n## 1. Project Overview\n\nChronoView is a modern web application designed for visualizing complex events in space and time. It leverages 3D visualization to provide a unique perspective on chronological data.\n\nThe project is structured as a monorepo managed by Turborepo, facilitating the management of multiple applications and shared packages. The core application is a Next.js frontend that interacts with a serverless backend and a Postgres database.\n\n### Key Features\n- **3D Timeline Visualization**: Interactive 3D timeline built directly with Three.js.\n- **Modern Tech Stack**: Next.js 16, React 19, TypeScript, Tailwind CSS 4.\n- **Serverless Backend**: Netlify Functions.\n- **Database**: Neon (Serverless Postgres).\n- **Authentication**: Stack Auth.\n\n## 2. Monorepo Structure\n\nThe project follows a standard monorepo structure:\n\n```\n/\n├── apps/\n│   ├── frontend/      # Main Next.js user-facing application\n│   ├── docs/          # Documentation site (Next.js)\n│   └── ...\n├── packages/\n│   ├── ui/            # Shared UI component library (ShadCN based)\n│   ├── eslint-config/ # Shared ESLint configurations\n│   └── typescript-config/ # Shared TypeScript configurations\n├── netlify/\n│   └── functions/     # Serverless backend functions\n├── supabase/\n│   └── migrations/    # Database schema migrations (Legacy/Reference)\n└── docs/              # Project documentation\n```\n\n### Key Directories\n- **`apps/frontend`**: The primary application containing all user-facing features.\n- **`packages/ui`**: Shared UI components, agnostic of business logic.\n- **`netlify/functions`**: Serverless functions acting as the API layer.\n\n## 3. Tech Stack\n\n### 3.1. Runtime Environment\n- **Runtime**: Node.js >= 18\n- **Package Manager**: npm\n\n### 3.2. Frontend (`apps/frontend`)\n- **Framework**: Next.js 16 (App Router)\n- **UI Library**: React 19\n- **Language**: TypeScript 5.9\n- **Styling**: Tailwind CSS 4\n- **UI Components**: ShadCN (Radix UI)\n- **State Management**: TanStack React Query\n- **3D Rendering**: Three.js (Direct implementation, no React Three Fiber)\n\n### 3.3. Backend & Data\n- **Backend**: Netlify Functions\n- **Database**: Neon (Serverless Postgres)\n- **Authentication**: Stack Auth\n- **Payments**: Stripe\n\n### 3.4. Tooling\n- **Monorepo**: Turborepo\n- **Linting**: ESLint\n- **Formatting**: Prettier\n\n## 4. Frontend Architecture (`apps/frontend`)\n\nThe frontend is built using Next.js App Router.\n\n### 4.1. Folder Structure (`src/app`)\n- **`auth/`**: Shared layout for authentication pages.\n- **`login/`**, **`signup/`**: Authentication pages using Stack Auth.\n- **`dashboard/`**: Protected user dashboard.\n- **`components/`**: Reusable React components.\n  - **`timeline/`**: Specific components for timeline visualization.\n    - `Timeline3DViewer.tsx`: Core component rendering the 3D scene using Three.js directly.\n\n### 4.2. 3D Visualization\nThe project integrates **Three.js directly** into React components instead of using `react-three-fiber`.\n- **Implementation**: `Timeline3DViewer.tsx` manages the Three.js scene lifecycle using `useRef` and `useEffect`.\n- **Rationale**: Provides granular control over the 3D scene implementation.\n\n## 5. Backend and Database\n\n### 5.1. Database\n- **Provider**: Neon (Serverless Postgres).\n- **Schema**:\n  - `events`: Stores timeline events.\n  - `timelines`: Stores timeline metadata.\n  - `subscriptions`: Manages user subscriptions (linked to Stripe).\n  - `users`: Links Stack Auth identities to application roles.\n  - `visitors`: Stores visitor logs (IP, User Agent, Referer, Path, Geo-location).\n\n### 5.2. Backend Logic\nServerless functions in `netlify/functions` handle business logic:\n- `get-timeline-data.mjs`: Fetches event data with access control.\n- `create-checkout-session.mjs`: Manages Stripe checkout sessions.\n- `stripe-webhook.mjs`: Syncs subscription status from Stripe.\n- `auth-me.js`: User authentication verification.\n- `track-visitor.mjs`: Public endpoint to log visitor data (IP-based, no cookies).\n- `get-visitor-logs.mjs`: Protected endpoint (Superadmin only) to fetch visitor logs.\n\n## 6. Authentication and Security\n\n### 6.1. Authentication Flow\n- **Provider**: Stack Auth handles identity, login, and session management.\n- **Flow**:\n  1. User logs in via `/login`.\n  2. Stack Auth issues a session token.\n  3. Token is used to authenticate requests to backend functions.\n\n### 6.2. Authorization (RBAC)\n- **Roles**: `admin`, `user`.\n- **Enforcement**: Netlify Functions verify user roles against the `users` table in Neon.\n\n### 6.3. Security Strategy\n- **Data in Transit**: TLS (HTTPS) for all communications.\n- **Input Validation**: Strict validation of all API inputs.\n- **Secrets Management**: Environment variables for all sensitive keys.\n\n## 7. Billing and Onboarding\n\n### 7.1. Flow\n1. **Landing/Pricing**: User selects a plan.\n2. **Auth**: User logs in or signs up.\n3. **Onboarding**: User is presented with a trial offer.\n4. **Checkout**: Stripe Checkout handles payment method collection.\n5. **Access**: User gains access to the dashboard.\n\n### 7.2. Components\n- **Frontend**: `onboarding/page.tsx`, `pricing/page.tsx`.\n- **Backend**: `create-checkout-session.mjs`, `stripe-webhook.mjs`.\n- **Database**: `subscriptions` table.\n\n## 8. Testing Strategy\n\n### 8.1. Levels\n- **Unit Tests**: Vitest/Jest for functions and components.\n- **Integration Tests**: React Testing Library for component interactions.\n- **E2E Tests**: Playwright/Cypress for critical user flows.\n\n### 8.2. Static Analysis\n- **TypeScript**: Strict type checking (`npm run check-types`).\n- **ESLint**: Code quality enforcement (`npm run lint`).\n\n## 9. Coding Standards\n\n- **Language**: TypeScript (Strict mode).\n- **Style**: Functional components, Hooks, `const` preference.\n- **Naming**: `PascalCase` for components, `camelCase` for functions/variables.\n- **Formatting**: Prettier enforced.\n\n## 10. Migration Context (Supabase to Neon)\n\nThe project is in the process of migrating from Supabase to Neon.\n- **Status**: Database schema and backend logic are being adapted for Neon.\n- **Auth**: Migrated from Supabase Auth to Stack Auth.\n- **Legacy**: `supabase/` directory contains reference migrations.\n\n## 11. Internationalization (i18n)\n\n- **Support**: English and Spanish.\n- **Implementation**: `useLanguage` hook and `strings.ts` dictionary.\n- **Rule**: No hardcoded strings in UI.\n"},"version":"1.0","updated_at":"2025-11-27T17:46:26.854820","document_type":"spec"},{"id":"dcd26f6f-c877-4a33-ad26-05bbd9adce95","tags":[],"title":"Workflows","author":"User","status":"draft","content":{"markdown":"# ChronoView Workflows & Use Cases\n\n## 1. Introduction\nThis document serves as the authoritative source of truth for all functional workflows within the ChronoView platform. It details the user journey, system interactions, and technical logic for every key feature, ensuring alignment between design, development, and business goals.\n\n## 2. User Roles\n\n| Role | Description | Key Permissions |\n| :--- | :--- | :--- |\n| **Visitor** | Unauthenticated user accessing the public site. | View Landing Page, View Pricing, Sign Up, Log In. |\n| **User** | Authenticated user with a standard account. | Create/Edit Timelines, Manage Profile, Start Trial, Manage Subscription. |\n| **Admin** | User with administrative control over specific timelines (currently synonymous with User for their own data). | Invite members, Delete timelines. |\n| **Superadmin** | System administrator with elevated privileges. | Access Superadmin Dashboard, View Visitor Logs, Manage System Users. |\n\n---\n\n## 3. Authentication & Onboarding Workflows\n\n### 3.1. Visitor Sign Up\n**User Story**: \"As a Visitor, I want to create an account so that I can access the platform.\"\n- **Preconditions**: User is not logged in.\n- **Trigger**: Click \"Get Started\" or \"Sign Up\" on Landing/Pricing page.\n- **Steps**:\n    1.  **Frontend**: User navigates to `/signup`.\n    2.  **Frontend**: User enters Email/Password or uses Social Auth via Stack Auth component.\n    3.  **System**: Stack Auth creates the identity and handles email verification.\n    4.  **Frontend**: Upon success, user is redirected to `/login` (or auto-logged in depending on config).\n\n### 3.2. User Login\n**User Story**: \"As a User, I want to log in to access my dashboard.\"\n- **Trigger**: Click \"Log In\".\n- **Steps**:\n    1.  **Frontend**: User navigates to `/login`.\n    2.  **Frontend**: User enters credentials via Stack Auth component.\n    3.  **System**: Stack Auth verifies credentials and issues a session token.\n    4.  **Frontend**: `LoginPage` detects valid session via `useUser()` hook.\n    5.  **Frontend**: Redirects user to `/dashboard`.\n\n### 3.3. New User Onboarding & Profile Creation\n**User Story**: \"As a new User, I want to complete my profile and start my trial.\"\n- **Preconditions**: User is logged in but has not completed onboarding.\n- **Steps**:\n    1.  **Frontend**: User lands on `/onboarding`.\n    2.  **Frontend**: `OnboardingClient` checks profile existence via `/.netlify/functions/get-user-profile`.\n    3.  **Backend**: If profile missing (404), Frontend redirects to profile creation form (implied step).\n    4.  **Frontend**: User fills details (Name, Role).\n    5.  **Backend**: `create-user-profile` function saves data to `users` table in Neon.\n    6.  **Frontend**: User is shown the \"Welcome\" screen with \"Start 14-Day Free Trial\" CTA.\n\n### 3.4. Start Free Trial\n**User Story**: \"As a User, I want to activate my free trial to use Pro features.\"\n- **Trigger**: Click \"Start 14-Day Free Trial\" on Onboarding or Pricing page.\n- **Steps**:\n    1.  **Frontend**: `OnboardingClient` calls `/.netlify/functions/create-checkout-session`.\n    2.  **Backend**: Function creates a Stripe Checkout Session with `trial_period_days: 14`.\n        - *Note*: If `REQUIRE_CARD_UPFRONT` env var is true, card details are collected.\n    3.  **Frontend**: Redirects user to the returned Stripe URL.\n    4.  **External**: User completes checkout on Stripe.\n    5.  **System**: Stripe Webhook (`checkout.session.completed`) triggers `stripe-webhook` function.\n    6.  **Backend**: Webhook inserts record into `subscriptions` table with status `active`.\n    7.  **Frontend**: User is redirected back to `/dashboard?session_id={id}`.\n\n---\n\n## 4. Core Timeline Features\n\n### 4.1. Create Timeline\n**User Story**: \"As a User, I want to create a new timeline to visualize events.\"\n- **Trigger**: Click \"Create Timeline\" on Dashboard.\n- **Steps**:\n    1.  **Frontend**: User opens creation modal/page.\n    2.  **Input**: User provides `name`, optional `description`, and `color`.\n    3.  **Frontend**: Calls `/.netlify/functions/create-timeline`.\n    4.  **Backend**:\n        - Verifies user role (must be `admin` in `users` table - *Note: Logic check required, currently restricts to 'admin' role*).\n        - Inserts new record into `timelines` table.\n        - Adds user to `timeline_members` as 'admin'.\n        - Inserts default `event_types` if provided.\n    5.  **Frontend**: Redirects to the new timeline's view.\n\n### 4.2. View 3D Timeline\n**User Story**: \"As a User, I want to explore the timeline in 3D.\"\n- **Trigger**: Click on a timeline card.\n- **Steps**:\n    1.  **Frontend**: Navigates to `/timeline/[id]`.\n    2.  **Frontend**: Fetches data via `/.netlify/functions/get-timeline-data`.\n    3.  **Frontend**: `Timeline3DViewer` initializes Three.js scene.\n    4.  **Interaction**:\n        - **Navigation**: Pan/Zoom to traverse time.\n        - **Selection**: Click event node to view details panel.\n        - **Hover**: Highlights event node.\n\n---\n\n## 5. Billing & Subscription Management\n\n### 5.1. View Pricing Plans\n**User Story**: \"As a Visitor/User, I want to see available plans.\"\n- **Trigger**: Navigate to `/pricing`.\n- **Steps**:\n    1.  **Frontend**: Displays Basic ($29), Silver ($99), and Premium ($299) cards.\n    2.  **Action**: Clicking a plan CTA redirects to Login (if visitor) or triggers Trial flow (if user).\n\n### 5.2. Manage Subscription\n**User Story**: \"As a User, I want to manage my billing details.\"\n- **Trigger**: \"Manage Subscription\" in Settings.\n- **Steps**:\n    1.  **Frontend**: Calls backend to create Stripe Customer Portal session.\n    2.  **Frontend**: Redirects to Stripe Portal.\n    3.  **External**: User upgrades/downgrades/cancels.\n    4.  **System**: Stripe Webhooks (`customer.subscription.updated`) update local `subscriptions` table.\n\n---\n\n## 6. Superadmin Workflows\n\n### 6.1. Access Superadmin Dashboard\n**User Story**: \"As a Superadmin, I want to access the admin console.\"\n- **Preconditions**: User has `role: 'superadmin'` in `users` table.\n- **Steps**:\n    1.  **Frontend**: Navigate to `/superadmin`.\n    2.  **Frontend**: `SuperadminClient` renders.\n    3.  **Backend**: Any data fetch verifies `superadmin` role via token.\n\n### 6.2. View Visitor Logs\n**User Story**: \"As a Superadmin, I want to see who is visiting the site.\"\n- **Trigger**: Select \"Visitor Logs\" tab on Superadmin Dashboard.\n- **Steps**:\n    1.  **Frontend**: Calls `/.netlify/functions/get-visitor-logs`.\n    2.  **Backend**: Verifies superadmin role.\n    3.  **Backend**: Queries `visitors` table (limit 100).\n    4.  **Frontend**: Renders `VisitorLogTable` with IP, Origin, and Timestamp.\n\n### 6.3. Stealth Visitor Tracking (System Workflow)\n**User Story**: \"As a System, I want to track visitor traffic without invasive cookies.\"\n- **Trigger**: User visits any page on the site.\n- **Steps**:\n    1.  **Frontend**: `VisitorTracker` component mounts in `RootLayout`.\n    2.  **Frontend**: Calls `/.netlify/functions/track-visitor` with client-side metadata (Path, Referer, User Agent).\n    3.  **Backend**: Function extracts IP address and Geo-location from request headers.\n    4.  **Backend**: Inserts record into `visitors` table.\n    5.  **Note**: No cookies are set or read during this process.\n\n---\n\n## 7. System Utilities\n\n### 7.1. Switch Language (i18n)\n**User Story**: \"As a User, I want to switch the interface language.\"\n- **Trigger**: Language toggle (UI element).\n- **Steps**:\n    1.  **Frontend**: `LanguageProvider` initializes state (detects browser `navigator.language` or defaults to 'en').\n    2.  **Action**: User selects 'es' or 'en'.\n    3.  **Frontend**: Context updates `language` state.\n    4.  **Frontend**: All components using `useLanguage()` re-render with new strings from `strings.ts`.\n"},"version":"1.0","updated_at":"2025-11-27T17:47:16.115224","document_type":"spec"},{"id":"2f8e6f52-f86a-4e5c-8f8c-2852b49df384","tags":[],"title":"Roadmap","author":"User","status":"draft","content":{"markdown":"# Strategic Roadmap 2025: ChronoView Evolution\n\n## 1. Executive Summary\nThis document outlines the strategic vision for evolving ChronoView from a timeline visualization tool into a comprehensive, community-driven platform for legal collaboration and investigation. The roadmap prioritizes user value, engagement, and technical innovation, structured to ensure sustainable growth and profitability.\n\n## 2. Strategic Pillars (The \"User First\" Philosophy)\n1.  **Empowerment & Community**: Transforming victims into active, supported participants in a community.\n2.  **Visual Intelligence**: Providing best-in-class, immersive visualization tools (3D/Geo/Network).\n3.  **Seamless Ingestion**: Removing friction from data entry through automation and mobile tools.\n4.  **Trust & Security**: Ensuring data integrity and privacy via blockchain and secure architecture.\n5.  **AI-Driven Insights**: Leveraging RAG and AI to turn raw data into actionable intelligence.\n\n---\n\n## 3. Phased Implementation Roadmap\n\n### Phase 1: Foundation, Revenue & Trust (Immediate Priority)\n*Goal: Ensure the system is robust, profitable, and discoverable.*\n\n| Feature | Description | User Value | Technical Complexity |\n| :--- | :--- | :--- | :--- |\n| **1. Stripe Integration** | Complete billing & subscription flow. | Enables access to Pro features. **(Critical for Profit)** | Medium |\n| **2. Email System (SES)** | Implement Amazon SES for transactional emails (Invites, Forgot Password). | Essential communication channel. | Low |\n| **3. Data Validation** | Rigorous testing of data ingestion forms and profile fields. | Ensures data integrity and user trust. | Medium |\n| **4. SEO & LEO** | Optimize for Search Engines and LLM Engines (LEO). | Organic growth and discoverability. | Low |\n| **5. Testing Suite** | Unit, Integration, and E2E tests (Vitest/Playwright). | Stability and confidence in releases. | High |\n\n### Phase 2: Engagement & Collaboration (Short-Term)\n*Goal: Foster active usage and community interaction.*\n\n| Feature | Description | User Value | Technical Complexity |\n| :--- | :--- | :--- | :--- |\n| **6. Commenting System** | Threaded comments on events. | collaborative analysis and enrichment. | Medium |\n| **7. Notifications** | Multi-channel alerts (In-app, Email, Webhooks/n8n). | Keeps users engaged and informed. | High |\n| **8. Admin Communication** | Bidirectional messaging (User <-> Admin <-> Superadmin). | Support and community alignment. | Medium |\n| **9. Superadmin Dash** | Analytics on usage, retention, and growth (D3/ShadCN). | Data-driven decision making. | Medium |\n| **10. Mobile Web Strategy** | Responsive fallback for mobile (D3.js or simplified 2D). | Accessibility on all devices. | High |\n\n### Phase 3: Advanced Visualization & Automation (Medium-Term)\n*Goal: Differentiate with cutting-edge tech and reduce friction.*\n\n| Feature | Description | User Value | Technical Complexity |\n| :--- | :--- | :--- | :--- |\n| **11. Advanced 3D** | Geo-spatial & Network/Protagonist visualizations. | Deeper insights into complex cases. | Very High |\n| **12. Mobile Ingestion App** | Ionic/React Native app for auto-uploading WhatsApp/Media. | Removes the pain of manual data entry. | Very High |\n| **13. AI & RAG** | Chat with Timeline, AI-generated reports/docs. | Instant answers and automated reporting. | High |\n| **14. Doc Generation** | AI-assisted creation of reports per timeline. | Tangible outputs for legal cases. | Medium |\n\n### Phase 4: Innovation & Ecosystem (Long-Term / R&D)\n*Goal: Moonshots that redefine the market.*\n\n| Feature | Description | User Value | Technical Complexity |\n| :--- | :--- | :--- | :--- |\n| **15. Unreal Engine Web** | WebAssembly-based high-fidelity 3D rendering. | \"Hollywood-grade\" visuals. | Extreme (R&D) |\n| **16. Blockchain Cert** | Solidity contracts to certify mobile uploads. | Immutable proof of evidence. | High |\n| **17. Gamification** | Neuromarketing, rewards, social integration. | Reduces cognitive load, increases retention. | High |\n\n---\n\n## 4. Technical Analysis of Key Challenges\n\n### 4.1. Mobile Strategy & 3D\n*   **Challenge**: React Three Fiber (R3F) can be heavy for mobile.\n*   **Proposal**:\n    *   **Desktop**: Full 3D experience (Three.js/R3F or Unreal Web).\n    *   **Mobile**: \"Lite\" version using D3.js or 2D Canvas for timelines. Focus on *ingestion* and *commenting* on mobile, *visualization* on desktop.\n\n### 4.2. Blockchain on Serverless\n*   **Challenge**: Deploying Solidity/Smart Contracts via Netlify.\n*   **Analysis**: Netlify functions can *interact* with a blockchain (via libraries like `ethers.js` or `viem`), but they don't host the blockchain itself. We would deploy contracts to a network (Ethereum/Polygon/Base) and use Netlify functions as the gateway to sign/verify transactions.\n*   **Verdict**: Feasible on free tier for interaction; contract deployment costs gas (unless using a testnet or L2).\n\n### 4.3. Unreal Engine for Web\n*   **Challenge**: Large file sizes (WASM), long load times, high complexity.\n*   **Analysis**: While visually superior, it breaks the \"web native\" feel (no DOM interaction, separate rendering context).\n*   **Recommendation**: Start with optimizing Three.js. Only move to Unreal if Three.js hits a hard performance ceiling. Proof of Concept (PoC) recommended.\n\n### 4.4. AI/RAG Architecture\n*   **Stack**: Vector Database (Pinecone/Weaviate or Neon w/ pgvector), LangChain/LlamaIndex, OpenAI/Anthropic API.\n*   **Flow**: Event created -> Text embedding generated -> Stored in Vector DB. User asks question -> RAG retrieves context -> LLM answers.\n\n---\n\n## 5. Next Steps\n1.  **Approve Roadmap**: Confirm this prioritization aligns with business goals.\n2.  **Define Phase 1 Epics**: Break down Phase 1 features into granular User Stories.\n3.  **PoC for Mobile**: Prototype the D3.js mobile view.\n4.  **PoC for Unreal**: Small experiment to test load times/feasibility.\n"},"version":"1.0","updated_at":"2025-11-27T20:12:25.223176","document_type":"design"},{"id":"908cbb0b-9dda-4675-a0ea-b7a506d317a1","tags":[],"title":"Visualizations","author":"User","status":"draft","content":{"markdown":"# Advanced Visualization Concepts & Data Model\n\n## 1. Overview\nThis document preserves the detailed specifications for advanced visualization types and their supporting data model. These concepts are targeted for implementation in **Phase 3** of the Strategic Roadmap.\n\n## 2. Proposed Visualization Types (\"The Comps\")\n\n### 1. 3D Geographic View\n- **Concept**: Interactive 3D globe.\n- **Functionality**: Locate events on their real geographic coordinates.\n- **Use Case**: Geopolitical analysis, troop movements, exploration routes.\n- **Tech**: Three.js Globe or CesiumJS.\n\n### 2. Map Geographic View\n- **Concept**: 2D Flat Map projection.\n- **Functionality**: Traditional cartographic view for precision and distance measurement.\n- **Use Case**: Regional analysis, logistics.\n- **Tech**: Leaflet, Mapbox GL, or D3.js.\n\n### 3. Concept TimeView\n- **Concept**: Abstract thematic grouping.\n- **Functionality**: Clusters events by theme or concept rather than strict time.\n- **Use Case**: Tracking the evolution of ideas or legal arguments.\n\n### 4. Constellation TimeView\n- **Concept**: Node-link diagram.\n- **Functionality**: Events are \"stars,\" relationships are lines. Focuses on connectivity.\n- **Use Case**: Conspiracy analysis, network mapping.\n\n### 5. Relational View\n- **Concept**: Entity-focused graph.\n- **Functionality**: Focuses on People/Organizations and how they interact across events.\n- **Use Case**: Social network analysis, protagonist tracking.\n\n### 6. Space TimeView\n- **Concept**: 4D Cube (Space-Time Cube).\n- **Functionality**: X/Y axes for geography, Z axis for time.\n- **Use Case**: Visualizing trajectories and movement over time.\n\n### 7. SuperNova TimeView\n- **Concept**: Radial/Explosive view.\n- **Functionality**: Central \"trigger\" event with consequences radiating outward in all directions.\n- **Use Case**: Impact analysis of a single major event.\n\n### 8. Descriptive TimeView\n- **Concept**: Text-heavy detailed view.\n- **Functionality**: Narrative focus with attached documents.\n- **Use Case**: Reading the \"story\" linearly.\n\n---\n\n## 3. Proposed Architecture: \"View Strategy Pattern\"\n\nTo manage these diverse views without bloating the app:\n\n1.  **Global View Selector**: UI to switch modes (Geo, Relational, Timeline) on the same dataset.\n2.  **Data Transformers**: Adapters that convert raw Neon data into view-specific formats (e.g., GeoJSON for maps, Graph nodes/links for Constellation).\n3.  **Lazy Loading**: Heavy libraries (Globe, Graph engine) load only when the specific view is active.\n\n---\n\n## 4. Supporting Data Model (Schema Proposal)\n\nTo support these views, the database schema needs to evolve beyond simple events.\n\n### `Event` (Enhanced)\n- `id`: UUID\n- `title`: String\n- `description`: Text\n- `start_date`: Timestamp\n- `end_date`: Timestamp (nullable)\n- `type`: Enum (Political, Military, Cultural, etc.)\n- `location_id`: FK -> `Location`\n- `importance`: Integer (1-10) for scaling nodes.\n\n### `Location` (For Geo Views)\n- `id`: UUID\n- `name`: String\n- `latitude`: Float\n- `longitude`: Float\n- `altitude`: Float (optional for 3D)\n- `geometry`: JSONB (for complex polygons/paths)\n\n### `Entity` (For Relational Views)\n- `id`: UUID\n- `name`: String\n- `type`: Enum (Person, Organization, Country)\n- `avatar_url`: String\n\n### `EventRelation` (For Constellation/Network)\n- `source_event_id`: FK -> `Event`\n- `target_event_id`: FK -> `Event`\n- `relation_type`: String (Causal, Correlated, Sequential)\n- `weight`: Float (connection strength)\n\n### `EventEntity` (Pivot Table)\n- `event_id`: FK -> `Event`\n- `entity_id`: FK -> `Entity`\n- `role`: String (Protagonist, Witness, Victim)\n\n### `Concept` (For Concept View)\n- `id`: UUID\n- `name`: String\n- `description`: Text\n\n### `EventConcept` (Pivot Table)\n- `event_id`: FK -> `Event`\n- `concept_id`: FK -> `Concept`\n"},"version":"1.0","updated_at":"2025-11-27T20:15:45.357207","document_type":"design"}],"features":{},"data":{},"technical_sources":[],"business_sources":[],"pinned":false}],"timestamp":"2025-11-29T00:19:14.134327","count":2}